# Отчёт по лабораторной работе 2 "Алгоритмы сопоставления изображений"

## 1. Теоретическая база

В данной лабораторной работе реализованы следующие алгоритмы:

- Прямой поиск одного изображения на другом (template matching) 
- Поиск ключевых точек эталона на входном изображении (с помощью SIFT) 

### Подготовка изображений
- Загружаются два изображения:
  - **`query_img`**: фрагмент, который нужно найти.
  - **`target_img`**: целевое изображение, в котором выполняется поиск.

### Метод сопоставления шаблона (*Template Matching*)
- Используется функция `cv2.matchTemplate` для нахождения области, наиболее похожей на фрагмент.
- Ключевые этапы:
  - Находятся координаты максимального совпадения (`max_loc`).
  - Определяются размеры фрагмента.
  - На целевом изображении рисуется рамка вокруг найденной области.

### Метод SIFT (*Scale-Invariant Feature Transform*)
- Применяется SIFT для сопоставления ключевых точек:
  - Инициализируется детектор SIFT для извлечения дескрипторов из обоих изображений.
  - Используется FLANN-алгоритм для сопоставления дескрипторов.
  - Применяется *Ratio Test* для фильтрации «хороших совпадений».
- Если совпадений достаточно:
  - Вычисляется матрица гомографии с помощью `cv2.findHomography`.
  - На целевом изображении выделяется область.


## 2. Описание разработанной системы

### Архитектура и алгоритмы

- Алгоритмы поиска и вывод результатов реализованы в виде Python кода
- Использованные библиотеки
- - OpenCV (для реализации алгоритмов)
- - Matplotlib (для вывода результатов)
- - Numpy

## 3. Результаты работы и тестирования системы

### Результаты тестирования:

### Вырезанная картинка компьютера с фотографии (тест на оригинале фотографии)
[![Result 1](results/res.jpg)](results/res1)

### Вырезанная картинка компьютера с фотографии (тест на оригинале фотографии с другого ракурса)
[![Result 2](results/res2.jpg)](results/res2)

### Вырезанная картинка башни с фотографии (тест на оригинале фотографии)
[![Result 3](results/res3.jpg)](results/res3)

### Вырезанная картинка башни с фотографии (тест на другой фотографии)
[![Result 4](results/res4.jpg)](results/res4)

### Вырезанная картинка мордочки самоеда (тест на оригинале фотографии)
[![Result 5](results/res5.jpg)](results/res5)

### Вырезанная картинка мордочки самоеда (тест на повернутой фотографии)
[![Result 6](results/res6.jpg)](results/res6)

### Вырезанная картинка мордочки самоеда (тест на фотографии уменьшенной в 2 раза)
[![Result 7](results/res7.jpg)](results/res7)

### Вырезанная картинка мордочки самоеда (тест на фотографии с шумом по Гауссу)
[![Result 8](results/res8.jpg)](results/res8)

### Вырезанная картинка мордочки самоеда (тест на фотографии с серым фоном вокруг)
[![Result 9](results/res9.jpg)](results/res9)

###  Вырезанная картинка растения из Марио (тест на оригинальной картинке)
[![Result 10](results/res10.jpg)](results/res10)

### Вырезанная и повернутая на 90 градусов картинка растения из Марио (тест на оригинальной картинке)
[![Result 11](results/res11.jpg)](results/res11)

### Вырезанная картинка упаковки чипсов (тест на фотографии на фоне других продуктов)
[![Result 12](results/res12.jpg)](results/res12)

### Вырезанная картинка масти карты (тест на фотографии карты)
[![Result 13](results/res13.jpg)](results/res13)


## 4. Выводы по работе

- Во многих случаях лучше отрабатывает поиск изображений по ключевым точкам 
- В некоторых случаях лучше отрабатывает template matching (например - на очень маленьких изображениях) 


## 5. Использованные источники

- https://docs.opencv.org/4.x/d4/dc6/tutorial_py_template_matching.html
- https://docs.opencv.org/4.x/da/df5/tutorial_py_sift_intro.html
